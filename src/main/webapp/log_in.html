<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="styles/login.css"/>
<script type="text/javascript" src="scripts/jquery.min.js"></script>
<script type="text/javascript" src="scripts/basevalue.js"></script>
<script type="text/javascript" src="scripts/login.js"></script>
<script type="text/javascript" src="scripts/cookie_util.js"></script>
<script type="text/javascript" src="scripts/ajaxfileupload.js"></script>
<script type="text/javascript">
	
	//点击登录
	$(function(){
		$("#login").click(userLogin);
	});
	
	//登录页面 用户名检查
	$(function(){
		$("#count").blur(checkName);
	});
	 
	//注册页面的用户名检查
	$(function(){
		$("#regist_username").blur(checkName1);
	});
	
	//点击 注册
	$(function(){
		$("#regist_button").click(register);
	})

</script>
</head>
	<body>
		<div class="global">
			<div class="log log_in" tabindex='-1' id='dl'>
				<!--<dl>-->
					<!--<dt>-->
						<!--<div class='header'>-->
							<!--<h3>登&nbsp;录</h3>-->
						<!--</div>-->
					<!--</dt>-->
					<!--<dt></dt>-->
					<!--<dt>-->
						<!--<div class='letter'>-->
							<!--用户名:&nbsp;<input type="text" name="" id="count" tabindex='1'/>-->
							<!--<span style="color:red"></span>-->
						<!--</div>-->
					<!--</dt>-->
					<!--<dt>-->
						<!--<div class='letter'>-->
							<!--密&nbsp;&nbsp;&nbsp;码:&nbsp;<input type="password" name="" id="password" tabindex='2'/>-->
							<!--<span style="color:red"></span>-->
						<!--</div>-->
					<!--</dt>-->
					<!--<dt>-->
						<!--<div>-->
							<!--<input type="button" name="" id="login" value='&nbsp登&nbsp录&nbsp' tabindex='3'/>-->
							<!--<input type="button" name="" id="sig_in" value='&nbsp注&nbsp册&nbsp' tabindex='4'/>-->
						<!--</div>-->
					<!--</dt>-->
				<!--</dl>-->
				<dl>
					<p><input type="file" id="file1" name="file" /></p>
					<input type="button" value="上传" />
					<p><img id="img1" alt="上传成功啦" src="" /></p>
				</dl>
			</div>
			<script type="text/javascript">
				$(function () {
					$(":button").click(function () {
						if ($("#file1").val().length > 0) {
							ajaxFileUpload();
						}
						else {
							alert("请选择图片");
						}
					})
				})
				function ajaxFileUpload() {
					$.ajaxFileUpload
					(
							{
								url: 'upload.do', //用于文件上传的服务器端请求地址
								type: 'post',
								data: { Id: '123', name: 'lunis' }, //此参数非常严谨，写错一个引号都不行
								secureuri: false, //一般设置为false
								fileElementId: 'file1', //文件上传空间的id属性  <input type="file" id="file" name="file" />
								dataType: 'json', //返回值类型 一般设置为json
								success: function (data, status)  //服务器成功响应处理函数
								{
									console.log(data)
									$("#img1").attr("src", data.imgPath1);
									alert("你请求的Id是" + data.Id + "     " + "你请求的名字是:" + data.name);
									if (typeof (data.error) != 'undefined') {
										if (data.error != '') {
											alert(data.error);
										} else {
											alert(data.msg);
										}
									}
								},
								error: function (data, status, e)//服务器响应失败处理函数
								{
									alert(e);
								}
							}
					)
					return false;
				}
			</script>
			<div class="sig sig_out" tabindex='-1' id='zc' style='visibility:hidden;'>
				<dl>
					<dt>
						<div class='header'>
							<h3>注&nbsp;册</h3>
						</div>
					</dt>
					<dt></dt>
					<dt>
						<div class='letter'>
							用户名:&nbsp;<input type="text" name="" id="regist_username" tabindex='5' />
							<div class='warning' id='warning_1'><span>该用户名不可用</span></div>
						</div>
					</dt>
					<dt>
						<div class='letter'>
							昵&nbsp;&nbsp;&nbsp;称:&nbsp;<input type="text" name="" id="nickname" tabindex='6'/>
						</div>
					</dt>
					<dt>
						<div class='letter'>
							密&nbsp;&nbsp;&nbsp;码:&nbsp;<input type="password" name="" id="regist_password" tabindex='7'/>
							<div class='warning' id='warning_2'><span>密码长度过短</span></div>
						</div>
					</dt>
					<dt>
						<div class='password'>
							&nbsp;&nbsp;&nbsp;确认密码:&nbsp;<input type="password" name="" id="final_password" tabindex='8'/>
							<div class='warning' id='warning_3'><span>密码输入不一致</span></div>
						</div>
					</dt>
					<dt>
						<div>
							<input type="button" name="" id="regist_button" value='&nbsp注&nbsp册&nbsp' tabindex='9'/>
							<input type="button" name="" id="back" value='&nbsp返&nbsp回&nbsp' tabindex='10'/>
							<script type="text/javascript">
							function get(e){
								return document.getElementById(e);
							}
							get('sig_in').onclick=function(){
								get('dl').className='log log_out';
								get('zc').className='sig sig_in';
							}
							get('back').onclick=function(){
								get('zc').className='sig sig_out';
								get('dl').className='log log_in';
							}
							window.onload=function(){
								var t =setTimeout("get('zc').style.visibility='visible'",800);
								get('final_password').onblur=function(){
									var npassword=get('regist_password').value;
									var fpassword=get('final_password').value;
									if(npassword!=fpassword){
										get('warning_3').style.display='block';
									}
								}
								get('regist_password').onblur=function(){
									var npassword=get('regist_password').value.length;
									if(npassword<6&&npassword>0){
										get('warning_2').style.display='block';
									}
								}
								get('regist_password').onfocus=function(){
									get('warning_2').style.display='none';
								}
								get('final_password').onfocus=function(){
									get('warning_3').style.display='none';
								}
							}
							</script>
						</div>
					</dt>
				</dl>
			</div>
		</div>
	</body>
</html>